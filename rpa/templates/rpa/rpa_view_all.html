{% extends 'dpotools.html' %}
{% load i18n %}

{% block title %}
  {% translate "All RPAs" %}
{% endblock %}

{% block content %}

  {% translate "No RPAs available." as all_norpas %}
  {% translate "Slug" as all_slug %}
  {% translate "Originator" as all_originator %}
  {% translate "View" as all_view %}
  {% translate "Export" as all_export %}
  {% translate "Edit" as all_edit %}
  {% translate "Delete" as all_delete %}

  <h4>{% translate "All RPAs on this system" %}:</h4>

  <table id="rpa-table" class="table table-striped table-bordered">
    <thead id="tableHeader">
      <tr>
        <th>{{ all_slug }}</th>
        <th>{{ all_originator }}</th>
        <th>{{ all_view }}</th>
        <th>{{ all_export }}</th>
        <th>{{ all_edit }}</th>
        <th>{{ all_delete }}</th>
      </tr>
    </thead>
    <tbody id="tableBody">
    {% for rpa in rpa %}
      <tr>
        <td><code>{{ rpa.slug }}</code></td>
        <td>{{ rpa.user.get_full_name }} ({{ rpa.user }})</td>
        <td><a href="{% url 'rpa:all_rpa_detail' rpa.slug %}" target="rpa_detail">{{ all_view }} (HTML):&nbsp;{{ rpa.slug }}</a></td>
        <td><a href="{% url 'rpa:all_rpa_detail_pdf' rpa.slug %}" target="rpa_detail_pdf">{{ all_export }} (PDF):&nbsp;{{ rpa.slug}}</a></td>
        <td><a href="{% url 'rpa:all_rpa_detail_edit' rpa.slug %}">{{ all_edit }}:&nbsp;{{ rpa.slug}}</a></td>
        <td><a href="{% url 'rpa:all_rpa_detail_delete' rpa.slug %}">{{ all_delete }}:&nbsp;{{ rpa.slug}}</a></td>
      </tr>
    {% empty %}
      {{ all_norpas }}
    {% endfor %}
    </tbody>
  </table>

  <script>
    $(document).ready(function() {
      var rows = $('#tableBody tr').length;
      if ( rows == 0 ) {
        $('#tableHeader').hide();
      } else {
        $('#rpa-table').DataTable({
          paging: true,
          ordering: true,
          searching: true,
          lengthChange: false,
          pageLength: 20,
          "columnDefs": [
            { "orderable": false, "targets": 2 },
            { "orderable": false, "targets": 3 },
            { "orderable": false, "targets": 4 },
            { "orderable": false, "targets": 5 }
          ]
        });
      }
    });
  </script>

{% endblock %}

